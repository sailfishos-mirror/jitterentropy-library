# Linux Entropy Recording and Validation

The test provided here is split into two aspects: the recording of the raw
entropy data and the validation of the data. Both aspects are implemented
with the code in the respective directories.

The idea is that you give the recording directory to the customer
so that he obtains the data. Once you receive the data, you process it
with the code in the validation directory.

## Getting Started

When standard testing shall be performed, the collection of raw entropy is
performed with the script `invoke_testing.sh`.

Before executing the script, the following files from the used Jitter RNG
noise source shall be copied into this directory:

	* jitterentropy-base.c

	* jitterentropy.h

	* jitterentropy-base-user.h

The results are stored in `../results-measurements` which then needs to be
processed with the `validation-runtime` and `validation-restart` logic.

## Recording of Raw Entropy Data

If the `invoke_testing.sh` is not helpful for performing the test, the following
explanation outlines the specific test steps to be invoked manually.

For recoding the raw entropic data, the user has to compile the code.
To do that, he has to copy the following files into the recording directory
prior compilation. These files are taken from his Jitter RNG implementation
that he uses:

	* jitterentropy-base.c

	* jitterentropy.h

	* jitterentropy-base-user.h

Depending on the version of the Jitter RNG, the following commands have to
be invoked for compiling the test tool:

	* Jitter RNG 1.x and older: make -f Makefile.foldtime

	* Jitter RNG 2.x: make -f Makefile.lfsrtime

	* Jitter RNG 3.x: make -f Makefile.hashtime

The test is now invoked with the following command:

	* Jitter RNG 1.x and older:

		./jitterentropy-foldtime > /dev/shm/jent-raw.data

	* Jitter RNG 2.x:

		./jitterentropy-lfsrtime > /dev/shm/jent-raw.data

	* Jitter RNG 3.x:

		./jitterentropy-hashtime > /dev/shm/jent-raw.data

In addition, the collection of output data from the Jitter RNG must be
compiled with the following command:

	make -f Makefile.rng

To generate output data from the Jitter RNG for validation, invoke:

	./jitterentropy-rng 2> /dev/shm/jent.rngout

The program is compiled to collect a sample of 10000000 events each (see 
the ROUNDS parameter in Makefile).

## NTG.1 Recording

The NTG.1 raw data recording is provided with the shell script
`invoke_testing_ntg1.sh`. This script generates the following sets of data with
1,000,000 samples each:

* raw data of the "common" runtime operation and behavior (this data applies
to the random data generated by the Jitter RNG intended for reseeding a
deterministic RNG),

* raw data of the "hash loop" operation (this is the first of the two noise
sources used to generate the first 256 bit output block intended to initialize
a deterministic RNG), and

* raw data for the "memory access loop" operation (this is the second noise
source used to generate the first 256 bit output block intended to initialize
a deterministic RNG).

The generated data is intended to be processed with the
`validation-runtime/processdata_ntg1.sh` tool which delivers the staticial
data individually for the aforementioned data.
